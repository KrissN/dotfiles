#!/usr/bin/env python
""" epylint doesn't accept --rcfile -- WTF?  Ours does.  This also
lets me disable and enable some rules on a global basis. """

import sys
import argparse
from pylint import lint
from pylint.reporters.text import ParseableTextReporter

def main():
    parser = argparse.ArgumentParser()
    parser.add_argument("--rcfile")
    parser.add_argument("filename")
    options = parser.parse_args()
    args = [
        "-r", "n", "--persistent=n", "-i", "y",
        "-d", "W0142,W1201,I0011,R0801,R0901,R0902,R0903,R0904,R0921,R0922",
        "-e", "W0511"]
    if options.rcfile:
        args.append("--rcfile=%s" % options.rcfile)
    args.append(options.filename)
    lint.Run(args, reporter=ParseableTextReporter(sys.stdout), exit=False)

if __name__ == "__main__":
    sys.exit(main())
